{"ast":null,"code":"var _jsxFileName = \"/Users/volod34/WebStormProjects/newage/trac/platform/frontend/ssr-artist/src/pages/merch/payment/secure-payment/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport GetTracPageData from '@artist/pages/api/tracpage';\nimport { usePageData } from '@artist/hooks/use-page-data';\nimport { getLocalStorageItem } from '@artist/utils/localstorage';\nimport Payment from '@components/merch/payment';\nimport Container from '@components/container';\nimport NextSeoHead from '@components/next-seo-head';\nimport ThemeWrapper from '@components/theme-wrapper';\nimport BackNavigation from '@components/back-navigation';\nimport styled from 'styled-components';\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLIC_KEY);\nconst ELEMENTS_OPTIONS = {\n  fonts: [{\n    cssSrc: 'https://fonts.googleapis.com/css2?family=Sen:wght@400;700&display=swap'\n  }]\n};\nexport default function SecurePayment({\n  siteData\n}) {\n  const {\n    pageData\n  } = usePageData(siteData);\n  const {\n    0: orderId\n  } = useState(getLocalStorageItem('orderId'));\n  if (!(pageData !== null && pageData !== void 0 && pageData.id)) return null;\n  return __jsx(React.Fragment, null, __jsx(Elements, {\n    stripe: stripePromise,\n    options: ELEMENTS_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, __jsx(NextSeoHead, {\n    pageData: pageData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }), __jsx(ThemeWrapper, {\n    theme: pageData ? pageData.theme : undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, __jsx(Container, {\n    pageData: pageData,\n    hasBackground: true,\n    hideNavbar: true,\n    hideCart: true,\n    hideSidebar: true,\n    action: __jsx(BackNavigation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, orderId ? __jsx(Payment, {\n    orderId: Array.isArray(orderId) ? orderId[0] : orderId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }) : __jsx(ErrorContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    className: 'redirecting',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 19\n    }\n  }, \"Something went wrong...\"), __jsx(\"a\", {\n    href: \"/merch/payment/billing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }\n  }, \"Go to a previous page\"))))));\n}\nexport async function getServerSideProps(context) {\n  const siteData = await GetTracPageData(`https://${context.req.headers['x-forwarded-host']}${context.req.url || '/'}`);\n  return {\n    props: {\n      siteData\n    }\n  };\n}\nconst ErrorContainer = styled.div`\n  display: flex;\n  max-width: 420px;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 auto;\n\n  a,\n  p {\n    color: ${({\n  theme\n}) => theme.colors.primary};\n    font-family: 'Sen', sans-serif;\n    font-size: 14px;\n    line-height: 18px;\n    text-decoration: underline;\n  }\n\n  .redirecting {\n    text-transform: uppercase;\n    font-weight: 700;\n    max-width: 180px;\n    text-decoration: none;\n  }\n`;","map":{"version":3,"sources":["/Users/volod34/WebStormProjects/newage/trac/platform/frontend/ssr-artist/src/pages/merch/payment/secure-payment/index.tsx"],"names":["React","useState","Elements","loadStripe","GetTracPageData","usePageData","getLocalStorageItem","Payment","Container","NextSeoHead","ThemeWrapper","BackNavigation","styled","stripePromise","process","env","NEXT_PUBLIC_STRIPE_PUBLIC_KEY","ELEMENTS_OPTIONS","fonts","cssSrc","SecurePayment","siteData","pageData","orderId","id","theme","undefined","Array","isArray","getServerSideProps","context","req","headers","url","props","ErrorContainer","div","colors","primary"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { GetServerSidePropsContext, GetServerSidePropsResult } from 'next';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport GetTracPageData from '@artist/pages/api/tracpage';\nimport { usePageData } from '@artist/hooks/use-page-data';\nimport { getLocalStorageItem } from '@artist/utils/localstorage';\nimport Payment from '@components/merch/payment';\nimport Container from '@components/container';\nimport NextSeoHead from '@components/next-seo-head';\nimport ThemeWrapper from '@components/theme-wrapper';\nimport BackNavigation from '@components/back-navigation';\nimport TracPage from '@services/tracpage/types/trac-page';\nimport styled from 'styled-components';\n\nconst stripePromise = loadStripe(\n  process.env.NEXT_PUBLIC_STRIPE_PUBLIC_KEY as string\n);\n\nconst ELEMENTS_OPTIONS = {\n  fonts: [\n    {\n      cssSrc:\n        'https://fonts.googleapis.com/css2?family=Sen:wght@400;700&display=swap'\n    }\n  ]\n};\n\ninterface SecurePaymentProps {\n  siteData: TracPage;\n}\n\nexport default function SecurePayment({ siteData }: SecurePaymentProps) {\n  const { pageData } = usePageData(siteData);\n  const [orderId] = useState(getLocalStorageItem('orderId'));\n  \n  if (!pageData?.id) return null;\n\n  return (\n    <>\n      <Elements stripe={stripePromise} options={ELEMENTS_OPTIONS}>\n        <NextSeoHead pageData={pageData} />\n        <ThemeWrapper theme={pageData ? pageData.theme : undefined}>\n          <Container\n            pageData={pageData}\n            hasBackground\n            hideNavbar\n            hideCart\n            hideSidebar\n            action={<BackNavigation />}\n          >\n            {orderId\n              ? <Payment orderId={Array.isArray(orderId) ? orderId[0] : orderId} />\n              : (\n                <ErrorContainer>\n                  <p className={'redirecting'}>Something went wrong...</p>\n                  <a href='/merch/payment/billing'>Go to a previous page</a>\n                </ErrorContainer>\n              )\n            }\n          </Container>\n        </ThemeWrapper>\n      </Elements>\n    </>\n  );\n}\n\nexport async function getServerSideProps(\n  context: GetServerSidePropsContext\n): Promise<GetServerSidePropsResult<SecurePaymentProps>> {\n  const siteData = await GetTracPageData(\n    `https://${context.req.headers['x-forwarded-host']}${\n      context.req.url || '/'\n    }`\n  );\n\n  return {\n    props: {\n      siteData,\n    },\n  };\n}\n\nconst ErrorContainer = styled.div`\n  display: flex;\n  max-width: 420px;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 auto;\n\n  a,\n  p {\n    color: ${({ theme }) => theme.colors.primary};\n    font-family: 'Sen', sans-serif;\n    font-size: 14px;\n    line-height: 18px;\n    text-decoration: underline;\n  }\n\n  .redirecting {\n    text-transform: uppercase;\n    font-weight: 700;\n    max-width: 180px;\n    text-decoration: none;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}